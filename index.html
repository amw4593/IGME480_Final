<!DOCTYPE html>
<html lang="en">

<head>
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- Pure three.js code that the A-Frame components use for location-based AR -->
  <script type="text/javascript"
    src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/three.js/build/ar-threex-location-only.js"></script>

  <!-- AR.js A-Frame components -->
  <script type="text/javascript"
    src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js"></script>
</head>

<body>
  <a-scene embedded arjs="sourceType: webcam;" fog="type: exponential; color: #220033; density: 0.05">

    <!-- Preload Assets -->
    <a-assets timeout="10000">
      <!-- Models -->
      <a-asset-item id="keyboardModel" src="assets/keyboard_and_mouse/scene.gltf"></a-asset-item>
      <a-asset-item id="starCarModel" src="assets/star_car/scene.gltf"></a-asset-item>
      <a-asset-item id="CarModel" src="assets/result.gltf"></a-asset-item>

      <!-- Sound -->
      <audio id="ambientSound" src="assets/laststop.mp3" preload="auto"></audio>
    </a-assets>

    <!-- Global Sound -->
    <a-entity sound="src: #ambientSound; autoplay: true; loop: true; volume: 0.5"></a-entity>

    <!-- Lights -->
    <a-entity light="type: ambient; color: #222"></a-entity>
    <a-entity light="type: point; color: #ff00ff; intensity: 2; distance: 15" position="2 5 -3"></a-entity>
    <a-entity light="type: point; color: #00ffff; intensity: 2; distance: 15" position="-2 5 -3"></a-entity>

    <!-- Marker Setup -->
    <a-marker type="pattern" preset="custom"
      url="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png">

      <!-- Animated Tint Plane (moved inside marker for visibility) -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="2" height="2" color="#220033"
        material="shader: flat; opacity: 0.1; transparent: true"
        animation="property: material.opacity; from: 0.05; to: 0.2; dur: 3000; dir: alternate; loop: true">
      </a-plane>

      <!-- Keyboard and Mouse Model -->
      <a-entity gltf-model="#keyboardModel" position="-1 0 -1" scale="0.3 0.3 0.3" rotation="0 90 0"></a-entity>

      <!-- Star Car Model (visible, spaced out) -->
      <a-entity gltf-model="#starCarModel" position="1.2 0 -1" scale="0.4 0.4 0.4" rotation="0 -90 0"></a-entity>

      <!-- Commented out the other car to avoid overlap -->
      <!--
      <a-entity gltf-model="#CarModel" position="1 0 -5" scale="0.4 0.4 0.4" rotation="0 -90 0"></a-entity>
      -->

    </a-marker>

    <!-- AR.js Controlled Camera -->
    <a-entity camera></a-entity>

  </a-scene>
</body>

</html>
